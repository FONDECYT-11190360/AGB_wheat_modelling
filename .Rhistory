group_by(site,season,date_h,depth) |>
summarise(temp =mean(temp,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'temp')
data_temp <- data_soil |>
select(c(1,5:7)) |>
pivot_longer(2:4,values_to = 'temp') |>
mutate(date = floor_date(as_datetime(date),'1 hour'),
depth = substr(name,3,4),
site = 'hidango',
season = '2021_2022') |>
group_by(site,season,date,depth) |>
summarise(temp =mean(temp,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'temp')
left_join(data_sm,data_temp, by =c('site','season','date','depth'))
data_soil_u <- left_join(data_sm,data_temp, by =c('site','season','date','depth'))
data_soil <- read_csv2('data/data_raw/data_soil_trigo_LC2022.csv')
data_soil
data_sm <- data_soil |>
select(c(1:4)) |>
pivot_longer(2:4,values_to = 'sm') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = substr(name,4,5),
site = 'hidango',
season = '2021_2022') |>
group_by(site,season,date,depth) |>
summarise(sm =mean(sm,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'sm')
data_sm
data_temp <- data_soil |>
select(c(1,5:7)) |>
pivot_longer(2:4,values_to = 'temp') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = substr(name,3,4),
site = 'hidango',
season = '2021_2022') |>
group_by(site,season,date,depth) |>
summarise(temp =mean(temp,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'temp')
data_temp
data_soil_lc <- read_csv2('data/data_raw/data_soil_trigo_LC2022.csv')
data_sm <- data_soil_lc |>
select(c(1:4)) |>
pivot_longer(2:4,values_to = 'sm') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = substr(name,4,5),
site = 'hidango',
season = '2021_2022') |>
group_by(site,season,date,depth) |>
summarise(sm =mean(sm,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'sm')
data_temp <- data_soil_lc |>
select(c(1,5:7)) |>
pivot_longer(2:4,values_to = 'temp') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = substr(name,3,4),
site = 'hidango',
season = '2021_2022') |>
group_by(site,season,date,depth) |>
summarise(temp =mean(temp,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'temp')
data_soil_u <- left_join(data_sm,data_temp, by =c('site','season','date','depth'))
data_soil_u |> ggplot(aes(date,sm,colour = depth)) +geom_point() + geom_line()
data_soil_u |> ggplot(aes(date,sm,colour = temp)) +geom_point() + geom_line()
data_soil_u |> ggplot(aes(date,temp,colour = depth)) +geom_point() + geom_line()
data_soil_u |> filter(depth == 75) |>  ggplot(aes(date,temp,colour = depth)) +geom_point() + geom_line()
data_temp
data_temp$depth |> unique()
data_sm$depth |> unique()
data_soil
data_soil_u |> filter(depth == 45) |>  ggplot(aes(date,temp,colour = depth)) +geom_point() + geom_line()
data_soil_u |> filter(depth == 45)
data_temp
data_soil_u$depth
data_soil_lc <- read_csv2('data/data_raw/data_soil_la_cancha.csv')
data_sm <- data_soil_lc |>
select(c(1:4)) |>
pivot_longer(2:4,values_to = 'sm') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,4,5)),
site = 'hidango',
season = '2021_2022') |>
group_by(site,season,date,depth) |>
summarise(sm =mean(sm,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'sm')
data_temp <- data_soil_lc |>
select(c(1,5:7)) |>
pivot_longer(2:4,values_to = 'temp') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,3,4)),
site = 'hidango',
season = '2021_2022') |>
group_by(site,season,date,depth) |>
summarise(temp =mean(temp,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'temp')
data_soil_u <- left_join(data_sm,data_temp, by =c('site','season','date','depth'))
data_soil_u |> ggplot(aes(date,sm,colour=as.factor(depth))) +geom_point() + geom_line()
data_soil_u |> ggplot(aes(date,temp,colour=as.factor(depth))) +geom_point() + geom_line()
data_soil__la_cancha <- left_join(data_sm,data_temp, by =c('site','season','date','depth'))
data_soil_hid <- read_csv2('data/data_raw/data_soil_hidango.csv')
data_sm <- data_soil_hid |>
select(c(1:4)) |>
pivot_longer(2:4,values_to = 'sm') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,4,5)),
site = 'hidango',
season = '2021_2022') |>
group_by(site,season,date,depth) |>
summarise(sm =mean(sm,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'sm')
data_soil_hid |>
select(c(1:4))
data_soil_lc <- read_csv2('data/data_raw/data_soil_la_cancha.csv')
data_sm <- data_soil_lc |>
select(c(1:4)) |>
pivot_longer(2:4,values_to = 'sm') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,4,5)),
site = 'hidango',
season = '2021_2022') |>
group_by(site,season,date,depth) |>
summarise(sm =mean(sm,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'sm')
data_sm
data_soil_lc
data_soil_hid
data_sm <- data_soil_hid |>
select(c(1:6)) |>
pivot_longer(4:6,values_to = 'sm') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,4,5))) |>
group_by(site,season,date,depth) |>
summarise(sm =mean(sm,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'sm')
data_sm
data_temp <- data_soil_hid |>
select(c(1,5:7)) |>
pivot_longer(2:4,values_to = 'temp') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,3,4))) |>
group_by(site,season,date,depth) |>
summarise(temp =mean(temp,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'temp')
data_soil_hid |>
select(c(1,5:7))
data_soil_hid |>
select(c(1:3,8:10))
data_temp <- data_soil_hid |>
select(c(1:3,7:9)) |>
pivot_longer(2:4,values_to = 'temp') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,3,4))) |>
group_by(site,season,date,depth) |>
summarise(temp =mean(temp,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'temp')
data_soil_hid |>
select(c(1:3,7:9))
data_soil_hid |>
select(c(1:3,7:9)) |>
pivot_longer(2:4,values_to = 'temp') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,3,4)))
data_soil_hid |>
select(c(1:3,7:9)) |>
pivot_longer(2:4,values_to = 'temp') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,3,4)))
data_temp <- data_soil_hid |>
select(c(1:3,7:9)) |>
pivot_longer(7:9,values_to = 'temp') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,3,4))) |>
group_by(site,season,date,depth) |>
summarise(temp =mean(temp,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'temp')
data_soil_hid |>
select(c(1:3,7:9)) |>
pivot_longer(7:9,values_to = 'temp')
data_soil_hid |>
select(c(1:3,7:9))
data_soil_hid |>
select(c(1:3,7:9)) |>
pivot_longer(4:6,values_to = 'temp') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,3,4)))
data_temp <- data_soil_hid |>
select(c(1:3,7:9)) |>
pivot_longer(4:6,values_to = 'temp') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,3,4))) |>
group_by(site,season,date,depth) |>
summarise(temp =mean(temp,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'temp')
data_soil_hidango <- left_join(data_sm,data_temp, by =c('site','season','date','depth'))
data_soil_hidango
data_soil_lc <- read_csv2('data/data_raw/data_soil_la_cancha.csv')
data_sm <- data_soil_lc |>
select(c(1:4)) |>
pivot_longer(2:4,values_to = 'sm') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,4,5)),
site = 'hidango',
season = '2021_2022') |>
group_by(site,season,date,depth) |>
summarise(sm =mean(sm,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'sm')
data_temp <- data_soil_lc |>
select(c(1,5:7)) |>
pivot_longer(2:4,values_to = 'temp') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,3,4)),
site = 'hidango',
season = '2021_2022') |>
group_by(site,season,date,depth) |>
summarise(temp =mean(temp,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'temp')
data_soil_la_cancha <- left_join(data_sm,data_temp, by =c('site','season','date','depth'))
data_soil_hid <- read_csv2('data/data_raw/data_soil_hidango.csv')
data_sm <- data_soil_hid |>
select(c(1:6)) |>
pivot_longer(4:6,values_to = 'sm') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,4,5))) |>
group_by(site,season,date,depth) |>
summarise(sm =mean(sm,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'sm')
data_temp <- data_soil_hid |>
select(c(1:3,7:9)) |>
pivot_longer(4:6,values_to = 'temp') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,3,4))) |>
group_by(site,season,date,depth) |>
summarise(temp =mean(temp,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'temp')
data_soil_hidango <- left_join(data_sm,data_temp, by =c('site','season','date','depth'))
data_soil_unida <- bind_rows(data_soil_la_cancha,data_soil_hidango)
write_rds(data_soil_unida,'data/data/processed/data_soil.rds')
write_rds(data_soil_unida,'data/data_processed/data_soil.rds')
data_soil_unida
data_soil_unida |> pivot_longer(5:6) |> ggplot(aes(date,value,colour=as.factor(depth))) + geom_point() +geom_line() + facet_grid(~.site) + theme_bw()
names(data_soil_unida)
data_soil_unida |> pivot_longer(5:6)
data_soil_unida |> pivot_longer(5:6) |> ggplot(aes(date,value,colour=as.factor(depth))) + geom_point() +geom_line() + facet_grid(.~site) + theme_bw()
data_soil_lc <- read_csv2('data/data_raw/data_soil_la_cancha.csv')
data_soil_lc
data_sm <- data_soil_lc |>
select(c(1:4)) |>
pivot_longer(2:4,values_to = 'sm') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,4,5)),
site = 'la_cancha',
season = '2021_2022') |>
group_by(site,season,date,depth) |>
summarise(sm =mean(sm,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'sm')
data_temp <- data_soil_lc |>
select(c(1,5:7)) |>
pivot_longer(2:4,values_to = 'temp') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,3,4)),
site = 'la_cancha',
season = '2021_2022') |>
group_by(site,season,date,depth) |>
summarise(temp =mean(temp,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'temp')
data_soil_la_cancha <- left_join(data_sm,data_temp, by =c('site','season','date','depth'))
data_soil_hid <- read_csv2('data/data_raw/data_soil_hidango.csv')
data_sm <- data_soil_hid |>
select(c(1:6)) |>
pivot_longer(4:6,values_to = 'sm') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,4,5))) |>
group_by(site,season,date,depth) |>
summarise(sm =mean(sm,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'sm')
data_temp <- data_soil_hid |>
select(c(1:3,7:9)) |>
pivot_longer(4:6,values_to = 'temp') |>
mutate(date = floor_date(dmy_hm(date),'1 hour'),
depth = as.numeric(substr(name,3,4))) |>
group_by(site,season,date,depth) |>
summarise(temp =mean(temp,na.rm = TRUE)) |>
relocate(season,.before = 'date') |>
relocate(site,.before = 'season') |>
relocate(depth,.before = 'temp')
data_soil_hidango <- left_join(data_sm,data_temp, by =c('site','season','date','depth'))
data_soil_unida <- bind_rows(data_soil_la_cancha,data_soil_hidango)
write_rds(data_soil_unida,'data/data_processed/data_soil.rds')
data_soil_unida |> pivot_longer(5:6) |> ggplot(aes(date,value,colour=as.factor(depth))) + geom_point() +geom_line() + facet_grid(.~site) + theme_bw()
data_soil_unida |> pivot_longer(5:6) |> ggplot(aes(date,value,colour=as.factor(depth))) + geom_point() +geom_line() + facet_grid(.~site,scales = 'free') + theme_bw()
data_soil_unida
data_soil_unida |> pivot_longer(5:6) |> ggplot(aes(date,value,colour=as.factor(depth))) + geom_point() +geom_line() + facet_grid(names~site,scales = 'free') + theme_bw()
data_soil_unida |> pivot_longer(5:6) |> ggplot(aes(date,value,colour=as.factor(depth))) + geom_point() +geom_line() + facet_grid(name~site,scales = 'free') + theme_bw()
data_soil_unida |> pivot_longer(5:6) |> ggplot(aes(date,value,colour=as.factor(depth))) + geom_point() +geom_line() + facet_wrap(name~site,scales = 'free') + theme_bw()
data_soil_unida |> filter(site == 'hidango') |> pivot_longer(5:6) |> ggplot(aes(date,value,colour=as.factor(depth))) + geom_point() +geom_line() + facet_wrap(name~site,scales = 'free') + theme_bw()
data_soil_unida |> pivot_longer(5:6) |> filter(site == 'hidango' & value >0 & value <1)  |> ggplot(aes(date,value,colour=as.factor(depth))) + geom_point() +geom_line() + facet_wrap(name~site,scales = 'free') + theme_bw()
data_soil_unida |> pivot_longer(5:6) |> filter(site == 'hidango' & value >0  |> ggplot(aes(date,value,colour=as.factor(depth))) + geom_point() +geom_line() + facet_wrap(name~site,scales = 'free') + theme_bw()
data_soil_unida |> pivot_longer(5:6) |> filter(site == 'hidango' & value >0)  |> ggplot(aes(date,value,colour=as.factor(depth))) + geom_point() +geom_line() + facet_wrap(name~site,scales = 'free') + theme_bw()
install.packages('exifr')
folder <- '/media/francisco/TOSHIBA EXT/Hemera/trigo/ariztia/'
files <- list.files(folder,recursive = TRUE,full.names = TRUE)
files
length(files)
data <- read_exif(files)
library(exifr)
data <- read_exif(files)
data
library(dplyr)
library(lubridate)
data |>
mutate(date = ymd_hms(FileModifyDate)) |>
summarize(range(date))
data |>
mutate(date = ymd_hms(FileModifyDate)) |>
group_by(day = floor_date(date,'1 day')) |>
summarize(n_fotos = n())
data |>
mutate(date = ymd_hms(FileModifyDate)) |>
group_by(day = floor_date(date,'1 day')) |>
summarize(n_fotos = n()) |>
ggplot(aes(n_fotos)) + geom_histogram()
library(ggplot2)
data |>
mutate(date = ymd_hms(FileModifyDate)) |>
group_by(day = floor_date(date,'1 day')) |>
summarize(n_fotos = n()) |>
ggplot(aes(n_fotos)) + geom_histogram()
data
hour(ymd_hms("2021:12:01 07:00:00"))
hour(ymd_hms("2021:12:01 14:00:00"))
data |>
mutate(date = ymd_hms(FileModifyDate),
hour = hour(date)) |>
filter(hour == 14)
data |>
mutate(date = ymd_hms(FileModifyDate),
hour = hour(date)) |>
filter(hour == 14) |>
pull(date)
data |>
mutate(date = ymd_hms(FileModifyDate),
hour = hour(date)) |>
filter(hour == 14) |>
pull(date) ->dates
dates |> diff()
data |>
mutate(date = ymd_hms(FileModifyDate),
hour = hour(date))
data$FileModifyDate
ymd_hms(data$FileModifyDate)
second(ymd_hms(data$FileModifyDate))
second(ymd_hms(data$FileModifyDate)) |> unique()
second(ymd_hms(data$FileModifyDate)) -> a
a[a != 0]
a[a != 0] |> lnegth()
a[a != 0] |> length()
data |>
mutate(date = ymd_hms(FileModifyDate),
sec = second(date)) |>
filter(sec != 0)
data$Directory
data$FileName
data |>
mutate(date = ymd_hms(FileModifyDate),
sec = second(date)) |>
filter(sec != 0) |>
select(Directory,FileName)
data |>
mutate(date = ymd_hms(FileModifyDate),
sec = second(date)) |>
filter(sec != 0) |>
select(Directory,FileName)
data$MIMEType
data$MIMEEncoding
data$MIMEEncoding |> unique()
data$GPSPosition
data$GPSPosition |> unique()
data$FOV
data$FOV |> unique()
data |>
filter(FOV == '0.05141713')
data |>
filter(FOV == '0.05141713') |>
select(Directory,FileName)
data |>
filter(FOV == 0.05141713) |>
select(Directory,FileName)
str(data)
data |>
filter(FOV < 0.1) |>
select(Directory,FileName)
data$FileSize
data$FileSize |> unique()
data$FileSize |> hist()
data$FileSize |> hist()
data$FileSize |> boxplot()
data$ImageDescription
data$ImageDescription |> unique()
data$YResolution
data$YResolution |> unique()
which(is.na(data$YResolution ))
data$FocalLength35efl
data$FocalLength35efl |> unique()
data |>
group_by(FocalLength35efl) |>
n()
data |>
group_by(FocalLength35efl) |>
count()
data |>
# group_by(FocalLength35efl) |>
# count()
filter(FocalLength35efl == 40116) |>
select(Directory,FileName)
data |>
# group_by(FocalLength35efl) |>
# count()
filter(FocalLength35efl == 40116) |>
select(Directory,FileName)
data$HyperfocalDistance
data$HyperfocalDistance |> unique()
data |>
group_by(HyperfocalDistance) |>
count()
data |>
mutate(date = ymd_hms(FileModifyDate),
hour = hour(date)) |>
filter(hour == 14) |>
pull(date) ->dates
dates
data$SceneCaptureType
data$SceneCaptureType |> unique()
data$Model
data$Model |> unique()
whcih(is.na(data$Model))
which(is.na(data$Model))
data |>
filter(is.na(Model))
data |>
filter(is.na(Model)) |>
# count()
# filter(FocalLength35efl == 40116) |>
select(Directory,FileName)
data$Software
data$Software |> unique()
data$ISO
data$ISO |> unique()
data |>
group_by(ISO) |>
count()
data |>
#group_by(ISO) |>
#count()
filter(ISO == 4) |>
select(Directory,FileName)
data |>
#group_by(ISO) |>
#count()
filter(ISO == 4)
data |>
#group_by(ISO) |>
#count()
filter(ISO == 200) |>
select(Directory,FileName)
data |>
#group_by(ISO) |>
#count()
filter(ISO == 6400) |>
select(Directory,FileName)
